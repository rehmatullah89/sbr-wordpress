<?php

/**
 * BuddyPress - Members/Blogs Registration forms
 *
 * @since 3.0.0
 * @version 8.0.0
 */

$states_String =  '  <option value="" selected="selected">Select a State</option>
<option value="AL">Alabama</option>
<option value="AK">Alaska</option>
<option value="AZ">Arizona</option>
<option value="AR">Arkansas</option>
<option value="CA">California</option>
<option value="CO">Colorado</option>
<option value="CT">Connecticut</option>
<option value="DE">Delaware</option>
<option value="DC">District Of Columbia</option>
<option value="FL">Florida</option>
<option value="GA">Georgia</option>
<option value="HI">Hawaii</option>
<option value="ID">Idaho</option>
<option value="IL">Illinois</option>
<option value="IN">Indiana</option>
<option value="IA">Iowa</option>
<option value="KS">Kansas</option>
<option value="KY">Kentucky</option>
<option value="LA">Louisiana</option>
<option value="ME">Maine</option>
<option value="MD">Maryland</option>
<option value="MA">Massachusetts</option>
<option value="MI">Michigan</option>
<option value="MN">Minnesota</option>
<option value="MS">Mississippi</option>
<option value="MO">Missouri</option>
<option value="MT">Montana</option>
<option value="NE">Nebraska</option>
<option value="NV">Nevada</option>
<option value="NH">New Hampshire</option>
<option value="NJ">New Jersey</option>
<option value="NM">New Mexico</option>
<option value="NY">New York</option>
<option value="NC">North Carolina</option>
<option value="ND">North Dakota</option>
<option value="OH">Ohio</option>
<option value="OK">Oklahoma</option>
<option value="OR">Oregon</option>
<option value="PA">Pennsylvania</option>
<option value="RI">Rhode Island</option>
<option value="SC">South Carolina</option>
<option value="SD">South Dakota</option>
<option value="TN">Tennessee</option>
<option value="TX">Texas</option>
<option value="UT">Utah</option>
<option value="VT">Vermont</option>
<option value="VA">Virginia</option>
<option value="WA">Washington</option>
<option value="WV">West Virginia</option>
<option value="WI">Wisconsin</option>
<option value="WY">Wyoming</option><option value="AA">Armed Forces (AA)</option><option value="AE">Armed Forces (AE)</option><option value="AP">Armed Forces (AP)</option>';
$years_string = '<option value="">Year</option>
<option value="1980">1980</option>
<option value="1981">1981</option>
<option value="1982">1982</option>
<option value="1983">1983</option>
<option value="1984">1984</option>
<option value="1985">1985</option>
<option value="1986">1986</option>
<option value="1987">1987</option>
<option value="1988">1988</option>
<option value="1989">1989</option>
<option value="1990">1990</option>
<option value="1991">1991</option>
<option value="1992">1992</option>
<option value="1993">1993</option>
<option value="1994">1994</option>
<option value="1995">1995</option>
<option value="1996">1996</option>
<option value="1997">1997</option>
<option value="1998">1998</option>
<option value="1999">1999</option>
<option value="2000">2000</option>
<option value="2001">2001</option>
<option value="2002">2002</option>
<option value="2003">2003</option>
<option value="2004">2004</option>
<option value="2005">2005</option>
<option value="2006">2006</option>
<option value="2007">2007</option>
<option value="2008">2008</option>
<option value="2009">2009</option>
<option value="2010">2010</option>
<option value="2011">2011</option>
<option value="2012">2012</option>
<option value="2013">2013</option>
<option value="2014">2014</option>
<option value="2015">2015</option>
<option value="2016">2016</option>
<option value="2017">2017</option>
<option value="2018">2018</option>
<option value="2019">2019</option>
<option value="2020">2020</option>
<option value="2021">2021</option>
<option value="2022">2022</option>';
$month_string = '<option value="">Month</option>
<option value="1">Janaury</option>
<option value="2">February</option>
<option value="3">March</option>
<option value="4">April</option>
<option value="5">May</option>
<option value="6">June</option>
<option value="7">July</option>
<option value="8">August</option>
<option value="9">September</option>
<option value="10">October</option>
<option value="11">November</option>
<option value="12">December</option>';
$states_liscence = '<div class="liscence-wrapper"><div class="editfield degree_title full-width-field educationTitle">
<legend>state*</legend>
<select name="repeater_state[state][]" id="state-lisc" required>
' . $states_String . '
</select>
</div>
<div class="editfield degree_title full-width-field educationTitle">
<legend>License Number*</legend>
<input type="text" name="repeater_state[liscence][]" required value="" id="lisc-lisc" placeholder="License*"/>
</div></div>';
$degree_string = '<div class="editfield degree_title full-width-field educationTitle">
<legend>School*</legend>
<input type="text" required name="repeater_degree[school][]" value="" placeholder="Ex: Boston University*"/>
</div>
<div class="editfield degree_title full-width-field educationTitle">
<legend>Degree*</legend>
<input type="text" required name="repeater_degree[degree_title][]" value="" placeholder="Ex: Bacholer"/>
</div>
<div class="editfield degree_title full-width-field educationTitle">
<legend>Graduation Date*</legend>
<input type="date" required name="repeater_degree[grad_date][]" value=""/>
</div>
';

$exp_string = '<div class="editfield degree_title"><legend>Title*</legend><input type="text" name="repeater_exp[exp_title][]" value="" required placeholder="Title"/></div>
<div class="editfield degree_title"><legend>Company/name*</legend><input type="text" name="repeater_exp[company][]" required value="" required  placeholder="Company" /></div>
<div class="editfield degree_title fullWidthItem"><div class="editfield degree_title employementFIelds"><legend> Employment Type</legend><select name="repeater_exp[exp_employment_type][]"><option value="Full-time">Full-time</option><option value="Part-time">Part-time</option><option value="Self-Employed">Self-Employed</option><option value="Contract">Contract</option><option value="Internship">Internship</option><option value="Apprenticeship">Apprenticeship</option><option value="Seasonal">Seasonal</option> </select></div></div>
<div class="editfield degree_title"><legend>City</legend><input type="text" class="location" name="repeater_exp[city][]" value=""  placeholder="City" /></div>
<div class="editfield degree_title estateFIelds"><legend>State</legend><select  class="location" name="repeater_exp[state][]">' . $states_String . '</select></div>
<div class="editfield degree_title educationTitle">
<legend>Start Date*</legend>							
<select name="repeater_exp[start_month][]" required>
' . $month_string . '
</select>
</div>
<div class="editfield degree_title educationTitle">
<legend class="startDateEmphty">Start Date*</legend>							
<select name="repeater_exp[start_year][]" required>
' . $years_string . '

</select>
</div>
<div class="editfield degree_title educationTitle hide-checked">
<legend>End Date</legend>								
<select name="repeater_exp[end_month][]">
' . $month_string . '
</select>
</div>
<div class="editfield degree_title educationTitle hide-checked">
<legend class="startDateEmphty">End Date</legend>	
<select name="repeater_exp[end_year][]">
' . $years_string . '

</select>
</div>

<div class="editfield degree_title currentlyWorkingInthisRole"><input type="checkbox" class="currently_Work" checked name="repeater_exp[currently_working][]" /><legend class="mb-0">I am currently working in this role</legend></div>';
$ferreral_codes = array('FMRS22', 'FMES22', 'FMLW22', 'FMKC22');
$ferreral_codes = array_map( 'strtolower', $ferreral_codes );
if (!isset($_REQUEST['referral_code']) || $_REQUEST['referral_code'] == '' || !in_array(strtolower($_REQUEST['referral_code']), $ferreral_codes)) {
    echo '<h3 style="color:red;">referral code is Invalid</h3>';
} else {
?>

    <?php bp_nouveau_signup_hook('before', 'page'); ?>
    <div class="rdhHeader text-center">
        <div class="rdh-logo">
            <img src="https://www.smilebrilliant.com/wp-content/uploads/2022/08/RDH-connect-logo.png" alt="RDH connect" class="img-fluid">
        </div>
        <h2 class="headingRegisration">Registration Form</h2>
    </div>
    <div id="register-page" class="page register-page">
        <?php bp_nouveau_template_notices(); ?>

        <?php bp_nouveau_user_feedback(bp_get_current_signup_step()); ?>

        <form action="" name="signup_form" id="signup-form" class="standard-form signup-form clearfix" method="post" enctype="multipart/form-data" autocomplete="off">

            <div class="layout-wrap">

                <?php if ('request-details' === bp_get_current_signup_step()) : ?>

                    <?php bp_nouveau_signup_hook('before', 'account_details'); ?>

                    <div class="register-section default-profile" id="basic-details-section" style="display:none;">

                        <?php /***** Basic Account Details ******/ ?>

                        <h2 class="bp-heading"><?php //esc_html_e( 'Account Details', 'buddypress' ); 
                                                ?></h2>

                        <?php //bp_nouveau_signup_form(); 
                        ?>

                    </div><!-- #basic-details-section -->

                    <div class="register-section register-section default-profile" id="basic-details-section">

                        <?php /***** Basic Account Details ******/ ?>

                        <h2 class="bp-heading"><?php _e('Account Details', 'buddypress'); ?></h2>

                        <div class="editfield account-detail-info-username no-label">
                            <label for="signup_username"><?php _e('Username', 'buddypress'); ?><span class="bp-required-field-label"> <?php _e('(required)', 'buddypress'); ?></span></label>
                            <?php

                            /**
                             * Fires and displays any member registration username errors.
                             *
                             * @since 1.1.0
                             */
                            do_action('bp_signup_username_errors'); ?>
                            <input type="text" required name="signup_username" role="presentation" id="signup_username" placeholder="Username * " value="<?php bp_signup_username_value(); ?>" <?php bp_form_field_attributes('username'); ?> autocomplete="off" />
                        </div>

                        <div class="editfield account-detail-info-email no-label">
                            <label for="signup_email"><?php _e('Email Address', 'buddypress'); ?><span class="bp-required-field-label"> <?php _e('(required)', 'buddypress'); ?></span></label>
                            <?php

                            /**
                             * Fires and displays any member registration email errors.
                             *
                             * @since 1.1.0
                             */
                            do_action('bp_signup_email_errors'); ?>
                            <input type="email" role="presentation" required placeholder="Email * " name="signup_email" id="signup_email" value="<?php bp_signup_email_value(); ?>" <?php bp_form_field_attributes('email'); ?> autocomplete="off" />
                        </div>


                        <div class="editfield account-detail-info-password no-label">
                            <label for="signup_password"><?php _e('Password', 'buddypress'); ?> <span class="bp-required-field-label"><?php _e('(required)', 'buddypress'); ?></span></label>
                            <?php

                            /**
                             * Fires and displays any member registration password errors.
                             *
                             * @since 1.1.0
                             */
                            do_action('bp_signup_password_errors'); ?>
                            <input type="password" required placeholder="Password * " name="signup_password" id="signup_password" value="" class="password-entry" <?php bp_form_field_attributes('password'); ?> pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="The password should be at least eight characters long. To make it stronger, use upper and lower case letters, numbers, and special chracters" />
                        </div>
                        <div class="editfield account-detail-info-confirm-pass no-label">
                            <label for="signup_password_confirm"><?php _e('Confirm Password', 'buddypress'); ?> <span class="bp-required-field-label"><?php _e('(required)', 'buddypress'); ?></span></label>
                            <?php

                            /**
                             * Fires and displays any member registration password confirmation errors.
                             *
                             * @since 1.1.0
                             */
                            do_action('bp_signup_password_confirm_errors'); ?>
                            <input required type="password" placeholder="Confirm Password * " name="signup_password_confirm" id="signup_password_confirm" value="" class="password-entry-confirm" <?php bp_form_field_attributes('password'); ?> pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="The password should be at least eight characters long. To make it stronger, use upper and lower case letters, numbers, and special chracters" />
                        </div>
                        <div class="clearfix"></div>
                        <p class="description indicator-hint edditedCustom"><span style="color: #000;font-weight: bold;">Hint:</span> The password should be at least eight
                            characters long. To make it stronger, use upper and lower case letters, numbers, and symbols like !
                            " ? $ % ^ &amp; ).</p>
                        <div id="pass-strength-result" class="password_strength" style="display:none;"></div>
                        <?php

                        /**
                         * Fires and displays any extra member registration details fields.
                         *
                         * @since 1.9.0
                         */
                        do_action('bp_account_details_fields'); ?>

                    </div><!-- #basic-details-section -->

                    <?php bp_nouveau_signup_hook('after', 'account_details'); ?>

                    <?php /***** Extra Profile Details ******/ ?>

                    <?php if (bp_is_active('xprofile') && bp_nouveau_has_signup_xprofile_fields(true)) : ?>

                        <?php bp_nouveau_signup_hook('before', 'signup_profile'); ?>




                        <div class="register-section extended-profile" id="profile-details-section">

                            <h2 class="bp-heading"><?php esc_html_e('Profile Details', 'buddypress'); ?></h2>

                            <?php /* Use the profile field loop to render input fields for the 'base' profile field group */ ?>
                            <?php while (bp_profile_groups()) : bp_the_profile_group(); ?>

                                <?php while (bp_profile_fields()) : bp_the_profile_field(); ?>

                                    <?php $classes = bp_get_field_css_class('editfield');
                                    if (str_contains($classes, 'field_gender')) {
                                    ?>
                                        <div class="contact-info-section">
                                            <h2 class="section-headings">Contact Info</h2>
                                        <?php
                                    }
                                    if (str_contains($classes, 'field_how-many-years-have-you-been-a-practicing-hygienist')) {
                                        ?>
                                            <div class="professional-info-section">
                                                <h2 class="section-headings">Professional Information</h2>

                                                <div class="field_wrapper liscence">
                                                    <div class="header_wrapper_mbt">
                                                        <h3>Which state(s) are you licensed to practice?</h3>
                                                        <div class="addMoreButton">
                                                            <a href="javascript:void(0);" class="add_button font-mont" title="Add field"><i class="plus-icon-svg" aria-hidden="true"></i> add more </a>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <?php echo $states_liscence; ?>

                                                    </div>
                                                </div>
                                            <?php
                                        }
                                        if (str_contains($classes, 'field_linkedin')) {
                                            ?>
                                                <div class="social-info-section">
                                                    <h2 class="section-headings">Social media Information</h2>
                                                <?php
                                            }
                                            $no_label =  array('textbox', 'wp-textbox', 'telephone', 'email', 'radio', 'number', 'wp-biography');
                                            //	echo bp_get_the_profile_field_type();
                                            $custom_cl = '';
                                            if (in_array(bp_get_the_profile_field_type(), $no_label)) {
                                                $custom_cl = 'no-label';
                                            }
                                                ?>
                                                <div <?php echo $classes; ?>>
                                                    <fieldset class="<?php echo $custom_cl; ?>">

                                                        <?php

                                                        $field_type = bp_xprofile_create_field_type(bp_get_the_profile_field_type());
                                                        $field_type->edit_field_html();

                                                        bp_nouveau_xprofile_edit_visibilty();
                                                        ?>

                                                    </fieldset>
                                                </div>
                                                <?php
                                                if (str_contains($classes, 'field_titles-select-all-that-apply')) {
                                                ?>
                                                    <div class="address-container">
                                                        <div class="editfield required-field visibility-public field_type_radio">
                                                            <fieldset class="no-label">
                                                                <legend> Address <span class="bp-required-field-label">*</span></legend>
                                                                <div class="input-options radio-button-options"><label for="home-office"><input type="radio" name="address[address_type]" checked id="home-office" value="home-office">Home/Office</label><label for="apo-fpo" class="option-label"><input type="radio" name="address[address_type]" id="apo-fpo" value="apo-fpo">APO/FPO</label></div>
                                                            </fieldset>
                                                        </div>
                                                        <div class="editfield degree_title addr">
                                                            <legend>Start typing your address...*</legend><input type="text" required class="input-text wfacp-form-control pac-target-input" name="address[address]" id="address-autocomp" placeholder="Start typing your address..." value="" autocomplete="off">
                                                        </div>
                                                        <div class="editfield degree_title towncity">
                                                            <legend>Town/City*</legend><input type="text" required class="input-text wfacp-form-control pac-target-input" name="address[town_city]" id="address-city" placeholder="House Number and Street Name" value="" autocomplete="off">
                                                        </div>
                                                        <div class="editfield degree_title apt">
                                                            <legend>Apartment, suite, unit etc.</legend><input type="text" name="address[apt]" value="" placeholder="Apartment, suite, unit etc. (optional)" />
                                                        </div>
                                                        <div class="editfield degree_title">
                                                            <legend>Zipcode*</legend><input type="text" required id="address-zip" name="address[zipcode]" value="" required placeholder="zipcode*" />
                                                        </div>
                                                        <div class="editfield degree_title">
                                                            <legend>State*</legend><select name="repeater_exp[state]" required id="address-rep-state"><?php echo $states_String; ?></select>
                                                        </div>
                                                    </div>
                                                </div>
                                            <?php
                                                }
                                                if (str_contains($classes, 'field_areas-of-interest-select-all-that-apply')) {
                                            ?>
                                                <div class="education-experiecce-wrapper">
                                                    <div class="field_wrapper education field_wrapper-education">
                                                        <div class="header_wrapper_mbt">
                                                            <h3>Education</h3>
                                                            <div class="addMoreButton">
                                                                <a href="javascript:void(0);" class="add_button font-mont" title="Add field"><i class="plus-icon-svg" aria-hidden="true"></i> add more</a>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <?php echo $degree_string; ?>


                                                        </div>
                                                    </div>

                                                    <div class="field_wrapper experience">
                                                        <div class="header_wrapper_mbt">
                                                            <h3>Experience</h3>
                                                            <div class="addMoreButton">
                                                                <a href="javascript:void(0);" class="add_button font-mont" title="Add field"><i class="plus-icon-svg" aria-hidden="true"></i> add more </a>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <?php echo $exp_string; ?>

                                                        </div>
                                                    </div>
                                                    <div class="editfield field_4 field_bio optional-field visibility-public alt field_type_wp-biography">
                                                        <fieldset class="no-label">


                                                            <label for="field_4">Brief introduction</label>
                                                            <textarea id="bio-description" name="biref" cols="40" rows="5" placeholder="Bio" class="valid bio-description" aria-invalid="false" maxlength="500"></textarea>
                                                            <p class="showCharactor">Characters Remaining <span id="characters-counter">500</span></p>
                                                        </fieldset>
                                                    </div>




                                                </div>
                                            </div>
                                        <?php
                                                }
                                                if (str_contains($classes, 'field_blog')) {
                                        ?>
                                        </div>
                                    <?php
                                                }

                                    ?>

                                <?php endwhile; ?>

                                <input type="hidden" name="signup_profile_field_ids" id="signup_profile_field_ids" value="<?php bp_the_profile_field_ids(); ?>" />

                            <?php endwhile; ?>

                            <?php bp_nouveau_signup_hook('', 'signup_profile'); ?>
                            <?php //do_action( 'bp_after_registration_confirmed' );
                            ?>

                        </div><!-- #profile-details-section -->

                        <?php bp_nouveau_signup_hook('after', 'signup_profile'); ?>

                    <?php endif; ?>

                    <?php if (bp_get_blog_signup_allowed()) : ?>

                        <?php bp_nouveau_signup_hook('before', 'blog_details'); ?>

                        <?php /***** Blog Creation Details ******/ ?>

                        <div class="register-section blog-details" id="blog-details-section">

                            <h2><?php esc_html_e('Site Details', 'buddypress'); ?></h2>

                            <p><label for="signup_with_blog"><input type="checkbox" name="signup_with_blog" id="signup_with_blog" value="1" <?php checked((int) bp_get_signup_with_blog_value(), 1); ?> />
                                    <?php esc_html_e("Yes, i'd like to create a new site", 'buddypress'); ?></label></p>

                            <div id="blog-details" <?php if ((int) bp_get_signup_with_blog_value()) : ?>class="show" <?php endif; ?>>

                                <?php bp_nouveau_signup_form('blog_details'); ?>

                            </div>

                        </div><!-- #blog-details-section -->

                        <?php bp_nouveau_signup_hook('after', 'blog_details'); ?>

                    <?php endif; ?>

                <?php endif; // request-details signup step 
                ?>

            </div><!-- //.layout-wrap -->

            <?php bp_nouveau_signup_hook('custom', 'steps'); ?>

            <?php if ('request-details' === bp_get_current_signup_step()) : ?>

                <?php if (bp_signup_requires_privacy_policy_acceptance()) : ?>
                    <?php  //bp_nouveau_signup_privacy_policy_acceptance_section(); 
                    ?>
                <?php endif; ?>

                <?php bp_nouveau_submit_button('register'); ?>

            <?php endif; ?>

        </form>
        <script src='https://maps.googleapis.com/maps/api/js?key=AIzaSyBbxE-oS52upTGTzOq2r1aCnG9QkqafsVI&#038;libraries=places&#038;ver=6.0.2' id='wfacp_google_js-js'></script>
        <script>
            jQuery(document).ready(function() {
                jQuery('#signup-form').find('Input,select').each(function() {
                    //jQuery(this).removeAttr('required');
                });
                jQuery('.field_states-select-all-that-apply select').select2();
                google.maps.event.addDomListener(window, 'load', function() {
                    if (jQuery('.address-container').hasClass('apofpo')) {
                        // return false;
                    } else {
                        var options = {
                            componentRestrictions: {
                                country: "us"
                            }
                        };
                        var places = new google.maps.places.Autocomplete(document.getElementById('address-autocomp'), options);

                        google.maps.event.addListener(places, 'place_changed', function() {
                            var place = places.getPlace();
                            var address = place.formatted_address;
                            var latitude = place.geometry.location.lat();
                            var longitude = place.geometry.location.lng();
                            var latlng = new google.maps.LatLng(latitude, longitude);
                            var geocoder = geocoder = new google.maps.Geocoder();
                            geocoder.geocode({
                                'latLng': latlng
                            }, function(results, status) {
                                if (status == google.maps.GeocoderStatus.OK) {
                                    if (results[0]) {
                                        var address = results[0].formatted_address;
                                        var pin = results[0].address_components[results[0].address_components.length - 2].short_name;
                                        var country = results[0].address_components[results[0].address_components.length - 2].long_name;
                                        var state = results[0].address_components[results[0].address_components.length - 3].short_name;
                                        var city = results[0].address_components[results[0].address_components.length - 4].long_name;
                                        if(pin == 'US') {
                                            pin = results[0].address_components[results[0].address_components.length - 1].short_name;
                                        }
                                    // console.log( results[0]);
                                        if(state =='US') {
                                            state =results[0].address_components[results[0].address_components.length - 4].short_name;
                                        }
                                        // console.log('ddd');
                                        // console.log(address);
                                    ///  document.getElementById('address-autocomp').value = address;
                                        document.getElementById('address-rep-state').value = state;
                                        document.getElementById('address-city').value = city;
                                        document.getElementById('address-zip').value = pin;
                                    }
                                }
                            });
                        });
                    }
                });
            });
        </script>
        <script type="text/javascript">
            function update_new_added_element_ids(obj) {
                classnae = '.' + obj;
                lastchild = jQuery(classnae).find('.wrapperFieldOption').last();
                jQuery(lastchild).addClass('jejejej');
                jQuery(lastchild).find('input,select').each(function() {
                    var number = 1 + Math.floor(Math.random() * 89801);
                    id_dynamic = 'id-' + number;
                    jQuery(this).attr('id', id_dynamic);
                    jQuery(this).rules("add", {
                        required: true,
                    });
                });

            }
            $(document).ready(function() {
                var maxField = 10; //Input fields increment limitation
                var addButton = $('.add_button'); //Add button selector
                var wrapper = $('.field_wrapper'); //Input field wrapper
                var focvused = 'onfocus="(this.type=\'date\')" onblur="(this.type=\'text\')"';
                var fieldHTMLdegree =
                    '<div style="clear:both" class="wrapperFieldOption edu-wrapperFieldOption"><a href="javascript:void(0);" class="remove_button minusIcon-flex"><i class="minusIcon-svg" aria-hidden="true"></i> Remove</a><?php echo preg_replace("/\r|\n/", "", $degree_string); ?></div>'; //New input field html 
                var fieldHTMLexpereince =
                    '<div style="clear:both" class="wrapperFieldOption eperience-wrapperFieldOption"><a href="javascript:void(0);" class="remove_button minusIcon-flex"><i class="minusIcon-svg" aria-hidden="true"></i> Remove</a><?php echo preg_replace("/\r|\n/", "", $exp_string); ?></div>';
                var fieldHTMLliscence =
                    '<div style="clear:both" class="wrapperFieldOption eperience-wrapperFieldOption"><a href="javascript:void(0);" class="remove_button minusIcon-flex"><i class="minusIcon-svg" aria-hidden="true"></i> Remove</a><?php echo preg_replace("/\r|\n/", "", $states_liscence); ?></div>';

                var x = 1; //Initial field counter is 1

                //Once add button is clicked
                $(addButton).click(function() {
                    //Check maximum number of input fields
                    if (x < maxField) {
                        x++; //Increment field counter

                        if ($(this).parents('.field_wrapper').hasClass('education')) {
                            $(this).parents('.field_wrapper').append(fieldHTMLdegree); //Add field html
                            update_new_added_element_ids('education');

                        }
                        if ($(this).parents('.field_wrapper').hasClass('experience')) {
                            $(this).parents('.field_wrapper').append(fieldHTMLexpereince); //Add field html
                            update_new_added_element_ids('experience');
                        }
                        if ($(this).parents('.field_wrapper').hasClass('liscence')) {
                            $(this).parents('.field_wrapper').append(fieldHTMLliscence); //Add field html
                            update_new_added_element_ids('liscence');
                        }


                    }
                });

                //Once remove button is clicked
                $('.field_wrapper').on('click', '.remove_button', function(e) {
                    e.preventDefault();
                    $(this).parent('div').remove(); //Remove field html
                    x--; //Decrement field counter
                });
            });
            $("#signup-form").bind("keypress", function(e) {
                if (e.keyCode == 13) {
                    return false;
                }
            });
            jQuery(document).ready(function() {
                jQuery('#field_273').val(getUrlParameter('referral_code'));
            });
            var getUrlParameter = function getUrlParameter(sParam) {
                var sPageURL = window.location.search.substring(1),
                    sURLVariables = sPageURL.split('&'),
                    sParameterName,
                    i;

                for (i = 0; i < sURLVariables.length; i++) {
                    sParameterName = sURLVariables[i].split('=');

                    if (sParameterName[0] === sParam) {
                        return sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
                    }
                }
                return false;
            };


            //-----for floating labels
            jQuery(document.body).on("focus", ".standard-form input", function() {
                jQuery(this).parents(".editfield").addClass("anim-wrap");
            });
            jQuery(document.body).on("focusout", ".standard-form input", function() {
                // console.log(jQuery(this).val());
                var currentVal = jQuery(this).val();
                if (currentVal.length <= 0) {
                    var t = jQuery(this).parents(".editfield");
                    t.removeClass("anim-wrap");
                }
            });
            jQuery(document.body).on("keyup", ".standard-form input", function() {
                var a = jQuery(this).parents(".editfield");
                console.log(jQuery(this).val());
                a.addClass("anim-wrap");
            }), jQuery(document.body).on("change", ".standard-form input", function() {
                var a = jQuery(this).find(".input-radio");
                a.length > 0 ? a.is(":checked").length > 0 ? jQuery(this).parents(".editfield").addClass("anim-wrap") :
                    jQuery(this).parents(".editfield").removeClass("anim-wrap") : null != jQuery(this).val() && "" !=
                    jQuery(this).val() ? "" !== jQuery(this).val() && (jQuery(this).parent().siblings(
                        ".wfacp_input_error_msg").hide(), jQuery(this).parents(".editfield").addClass("anim-wrap")) :
                    jQuery(this).parents(".editfield").removeClass("anim-wrap")
            });
            var apo_addressValue = '';
            var apo_text2 = 'Enter organization name if applicable';
            home_text2 = 'Apartment, suite, unit etc. (optional)';

            var apo_text1 = 'APO/FPO Address *';
            home_text1 = 'start typing your address... *';
            home_text_billing1 = 'Apt Number/Company';
            jQuery(document).on('change', 'input[name="address[address_type]"]', function() {
                armyAddresses(true);

            });

            function armyAddresses(set_val = false) {
                apo_addressValue = $("input[name='address[address_type]']:checked").val();
                if (apo_addressValue == 'apo-fpo') {
                    jQuery('.address-container').addClass('apofpo');
                } else {
                    jQuery('.address-container').removeClass('apofpo');

                }
                shippping_address_fields_update(set_val);
                //billing_address_fields_update(set_val);
            }

            function shippping_address_fields_update(set_val) {
                apo_addressValue = $("input[name='address[address_type]']:checked").val();
                if (apo_addressValue == 'apo-fpo') {
                    jQuery('.apt legend').text(apo_text2);
                    jQuery('.addr legend').text(apo_text1);
                    jQuery(document).find('#address-rep-state option').each(function() {
                        if (jQuery(this).val() != 'AA' && jQuery(this).val() != 'AE' && jQuery(this).val() != 'AP') {
                            jQuery(this).attr('disabled', 'disabled');
                        }
                    });
                    if (set_val) {
                        $("#address-rep-state").val("AA").change();
                    }
                } else {
                    jQuery('.addr legend').text(home_text1);
                    jQuery('.apt legend').text(home_text_billing1);

                    jQuery(document).find('#address-rep-state option').each(function() {
                        jQuery(this).removeAttr('disabled');

                        jQuery(this).show();
                        if (set_val) {
                            //$('#shipping_state').val(jQuery('#shipping_state').find('option:first-child').val())
                        }
                    });
                    $("#address-rep-state").val("").change();
                    //$("#shipping_state").select2("destroy");
                }
            }
            jQuery(document).on('change', '.currently_Work', function() {
                if (this.checked) {
                    jQuery(this).parent().parent().find('.hide-checked select').removeAttr('required');

                } else {
                    jQuery(this).parent().parent().find('.hide-checked select').attr('required', "");

                }
            })


            $(document).ready(function() {
                var maxCharacters = 500;
                document.getElementById('bio-description').onkeyup = function() {
                    document.getElementById('characters-counter').innerHTML = (maxCharacters - this.value.length);
                };
            });
        </script>

        <style>
            .editfield.degree_title {
                /* margin-top: 20px !important; */
                float: left;
                width: 50%;
            }

            .editfield.passing_year {
                /* margin-top: 20px !important; */
                float: right;
                width: 50%;
            }

            .field_referral {
                display: none;
            }

            .required-cls .mbbb {
                color: red;
            }

            .required-cls select,
            .required-cls input {
                border: 1px solid red !important;
            }
        </style>
    </div>

    <?php bp_nouveau_signup_hook('after', 'page'); ?>
<?php } ?>